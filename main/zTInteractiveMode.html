<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-Zone: Interactive Mode</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="cmsis_logo_white_small.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-Zone
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "CMSIS-Zone");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">System Resource Management</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('zTInteractiveMode.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Interactive Mode </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_src_interactive"></a> The following section explains the interactive mode of the CMSIS-Zone Utility. The following steps are explained:</p>
<ul>
<li><a class="el" href="zTInteractiveMode.html#zTUICreateProject">Create a CMSIS-Zone Project</a> that allows to manage system resources.</li>
<li><a class="el" href="zTInteractiveMode.html#zTUIMemPerRes">Memory and Peripheral Resources</a> allows to create sub-memory regions and defines properties such as access permissions.</li>
<li><a class="el" href="zTInteractiveMode.html#zTUIZonePart">Zone Partitioning</a> that assigns available resources to sub-projects or execution compartments.</li>
<li><a class="el" href="zTInteractiveMode.html#zTUIGenerate">Generate output files</a> for device configuration and linker settings.</li>
</ul>
<h1><a class="anchor" id="zTUICreateProject"></a>
Create a CMSIS-Zone Project</h1>
<p>Go to <b>File</b> - <b>New</b> - <b>Project</b> and select <b>CMSIS</b> - <b>CMSIS-Zone Project</b>:</p>
<div class="image">
<img src="zone_project.png" alt=""/>
<div class="caption">
Selecting "CMSIS-Zone Project"</div></div>
    <p>Click <b>Next</b>. In the next window, enter a <b>Project name</b>:</p>
<div class="image">
<img src="SetProjectName.png" alt=""/>
<div class="caption">
Setting a project name</div></div>
    <p>Click <b>Next</b>.</p>
<h2><a class="anchor" id="zTUICreateProjectVar1"></a>
Variant 1: Using an existing *.rzone file</h2>
<p>In the next window, select <b>Use existing resource file (*.rzone)</b> and browse to the location of the *.rzone file:</p>
<div class="image">
<img src="SpecifyRzoneFile.png" alt=""/>
<div class="caption">
Path to an existing .rzone file</div></div>
    <p>Click <b>Finish</b>. The new project is created and an empty *.azone file is added.</p>
<h2><a class="anchor" id="zTUICreateProjectVar2"></a>
Variant 2: Using the SVD file from the device family pack</h2>
<p>In the next window, use <b>Select device to create resource file from device description</b>:</p>
<div class="image">
<img src="SelectDeviceFrom.png" alt=""/>
<div class="caption">
Creating an .rzone file from SVD</div></div>
    <p>Next, select your device from the list of installed device family packs:</p>
<div class="image">
<img src="SelectDevice.png" alt=""/>
<div class="caption">
Selecting a target device</div></div>
    <p>Click <b>Finish</b>. The new project and the *.rzone file are created and an empty *.azone file is added.</p>
<dl class="section note"><dt>Note</dt><dd>Make sure that you have set the path to your pack installation directory correctly. Go to <b>Window</b> -&gt; <b>Preferences</b> and check the entry for the <b>CMSIS Pack root folder</b> (usually set to <code>localappdata%\\Arm\\Packs</code>:</dd></dl>
<div class="image">
<img src="window_preferences.png" alt=""/>
<div class="caption">
Path to CMSIS Pack root folder</div></div>
    <h1><a class="anchor" id="zTUIMemPerRes"></a>
Memory and Peripheral Resources</h1>
<p>The available memory can be further divided into <a class="el" href="zTInteractiveMode.html#zTUIMemAdd">smaller regions</a> that are later assigned to zones, for example a zone for loader and zone for application.</p>
<p>For memory and peripherals <a class="el" href="zTInteractiveMode.html#zTUIPerProp">properties</a> such as access permission, privilege, and security level can be configured.</p>
<p>These settings can be for example used to generate source code files that configure the device at run-time.</p>
<h2><a class="anchor" id="zTUIMemView"></a>
View memory and peripheral resources</h2>
<p>Initially, this uses the information in the *.rzone file which defines the generic access permissions for memory and peripherals. The CMSIS-Zone Editor shows the <b>Resource Map</b> of the given device:</p>
<div class="image">
<img src="lpc55_resource_map.png" alt=""/>
<div class="caption">
Resource map example</div></div>
    <p>Here, you can see all resources that are available on the device. You see <b>Memory</b>, <b>Peripherals</b>, ** Cores**, and <b>Info</b> related to the resources. <a class="el" href="zoneToolUsage.html#zTGUIZoneEditor">Colored resources</a> are assigned to a zone.</p>
<h2><a class="anchor" id="zTUIMemAdd"></a>
Create Memory Regions</h2>
<p>To create a new memory region, right-click on the memory that you want to divide and select <b>Add memory region</b>:</p>
<div class="image">
<img src="AddMemoryBlock.png" alt=""/>
<div class="caption">
Adding memory region</div></div>
    <p>In the dialog a name derived from the parent memory region is provided. Change this region name as needed and specify the size. In this dialog, you change permissions, privilege, or security level for the memory region. When done, click <b>Finish</b>:</p>
<div class="image">
<img src="NewMemoryBlockWiz.png" alt=""/>
<div class="caption">
Configuring new memory block</div></div>
    <p>The new memory region is immediately shown in the zone map. Depending on the security level, you may be able to assign this new region only to certain zones. For example, secure memory regions cannot be assigned to a non-secure zone.</p>
<div class="image">
<img src="IRAM1_1Display.png" alt=""/>
<div class="caption">
New memory region in the project</div></div>
    <p>The information about the memory regions is stored in the <a class="el" href="xml_partition.html#xml_amemory">/azone/partition/memory element</a> element of the *.azone file.</p>
<h2><a class="anchor" id="zTUIMemDel"></a>
Delete Memory Regions</h2>
<p>To delete a memory region, right-click on the memory region select <b>Delete memory region</b>:</p>
<div class="image">
<img src="DelMemoryRegion.png" alt=""/>
<div class="caption">
Deleting a memory region</div></div>
    <h2><a class="anchor" id="zTUIPerProp"></a>
Resource Properties</h2>
<p>To change the properties of a resource, such as a peripheral for example, right-click the resource and select <b>Properties</b>:</p>
<div class="image">
<img src="res_prop.png" alt=""/>
<div class="caption">
Selecting resource properties</div></div>
    <p>Then, you can set these properties:</p>
<div class="image">
<img src="peripheral_properties.png" alt=""/>
<div class="caption">
Configuring resource properties</div></div>
    <p><b>General</b></p><ul>
<li><code>Shared</code>: the resource can be accessed by more than one zone</li>
<li><code>Startup</code>: locate the vector table to this region</li>
<li><code>No zero init</code>: preserve RAM content at startup</li>
<li><code>DMA</code>: enable direct memory access</li>
</ul>
<p><b>Permissions</b></p><ul>
<li><code>peripheral</code>: mark this as a peripheral</li>
<li><code>read</code></li>
<li><code>write</code></li>
<li><code>execute</code></li>
</ul>
<p><b>Privilege</b></p><ul>
<li><code>not specified</code></li>
<li><code>privileged</code></li>
<li><code>unprivileged</code></li>
</ul>
<p><b>Security</b></p><ul>
<li><code>not specified</code></li>
<li><code>non-secure</code></li>
<li><code>non-secure callable</code></li>
<li><code>secure</code></li>
</ul>
<p>The information about the peripherals is stored in the <a class="el" href="xml_partition.html#xml_aperipheral">/azone/partition/peripheral element</a> element of the *.azone file.</p>
<h2><a class="anchor" id="zTUIPerSlotConf"></a>
Configure peripheral slot access rights</h2>
<p>Peripherals can have so called slots that can be configured separately. Depending on the peripheral, the slots have different names in the Zone Editor. For example, for DMA they are called <b>Channels</b>:</p>
<div class="image">
<img src="dma_channel_config.png" alt=""/>
<div class="caption">
Configuring DMA Channels</div></div>
    <p>For GPIOs, they are called <b>Pins</b>:</p>
<div class="image">
<img src="gpio_pins_config.png" alt=""/>
<div class="caption">
Configuring GPIO Pins</div></div>
    <p>In the dialog, you can set security and privilege levels:</p>
<div class="image">
<img src="dma_gpio_config.png" alt=""/>
<div class="caption">
Security and privilege leves for Pins and Channels</div></div>
    <p>The information about the slots is stored in the <a class="el" href="xml_partition.html#xml_aslot">/azone/partition/peripheral/slot element</a> element of the *.azone file.</p>
<h1><a class="anchor" id="zTUIZonePart"></a>
Zone Partitioning</h1>
<p>Every CMSIS-Zone project consists of one or more zones. The basic flow to create zones is as follows:</p><ul>
<li>In case of multi-core devices, create a zone for each processor.</li>
<li>Then create at least one zone for each processor to be able to assign memories and peripherals. If your device contains Arm Cortex-M cores supporting TrustZone for Armv8-M, create a secure and a non-secure partition for each of these cores.</li>
</ul>
<h2><a class="anchor" id="zTUICreate"></a>
Create Zones</h2>
<p>To split a multi-processor system into single-processor sub-systems, you need to create new zones. Switch to the <b>Zones</b> tab and click the <b>Add new zone</b> button: (<img src="AddNewZoneButton.png" alt="" class="inline"/>     ).</p>
<p>In the new window, you need to specify a name for the zone, select the applicable core, and choose the security level (secure/non-secure).</p>
<p>In the <a class="el" href="zTEMuscaA1.html">Musca-A1</a> example, a new zone called "CM33_0" was created and attached to processor core 0 without any security attribute (not specified):</p>
<div class="image">
<img src="NewZoneCM33_0.png" alt=""/>
<div class="caption">
Adding new zone</div></div>
    <p>Similarly, an additional zone called "CM33_1" was created and attached to processor core 1, without security attribute.</p>
<p>Save your settings with the <b>Save</b> button (<img src="SaveButton.png" alt="" class="inline"/>     ).</p>
<dl class="section note"><dt>Note</dt><dd>Adding zones only works for the currently opened <a class="el" href="zoneFormat.html#azone">.azone</a> file. The information about the zones is stored in the <a class="el" href="xml_zones.html">/azone/zones element</a> element of the *.azone file.</dd></dl>
<h1><a class="anchor" id="zTUIGenerate"></a>
Generate output files</h1>
<p>The CMSIS-Zone utility can generate files that represent the configuration of the system. These files can be used in the project source files or tool configuration files.</p>
<p>other toolchains for further development. The generator process creates:</p><ul>
<li>Configuration files for tool and hardware setup, that are defined by <a class="el" href="GenDataModel.html">.ftl files</a> in the project <code>ftl</code> directory.</li>
<li>Files that represent <a class="el" href="zTInteractiveMode.html#zTUICreate">sub-systems</a> (<a class="el" href="zoneFormat.html#rzone">.rzone</a> and <a class="el" href="zoneFormat.html#azone">.azone</a>) that can be partitioned further (restart the process).</li>
</ul>
<p>To start the generation, press the <b>Generate</b> button or use the menu item <b>CMSIS Zone - Generate</b> (<img src="GenCodeButton.png" alt="" class="inline"/>     ).</p>
<p>Check <a class="el" href="zoneToolUsage.html#zTProjEx">Project Explorer</a> to observe the changes. In the project, the generated <code>.azone</code> and <code>.rzone</code> files appear and the <code>ftl_gen</code> directory contains the files defined by the <code>ftl</code> template files:</p>
<div class="image">
<img src="gen_output.png" alt=""/>
<div class="caption">
Output files in Project Exlporer</div></div>
     </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
