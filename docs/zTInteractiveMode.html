<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Interactive Mode</title>
<title>CMSIS-Zone (Preview): Interactive Mode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="cmsis.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="CMSIS_Logo_Final.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CMSIS-Zone (Preview)
   &#160;<span id="projectnumber">Version 0.11.0</span>
   </div>
   <div id="projectbrief">System Resource Management</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('zTInteractiveMode.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Interactive Mode </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In the <b>Interactive</b> <b>Mode</b>, use the GUI to</p>
<ul>
<li><a class="el" href="zTInteractiveMode.html#zTUICreateProject">create new projects</a>,</li>
<li><a class="el" href="zTInteractiveMode.html#zTUIMemPerRes">create new memory blocks and change resource properties</a>,</li>
<li><a class="el" href="zTInteractiveMode.html#zTUIZonePart">partition zones</a>, and</li>
<li><a class="el" href="zTInteractiveMode.html#zTUIGenerate">generate</a> the relevant output.</li>
</ul>
<h1><a class="anchor" id="zTUICreateProject"></a>
Create a CMSIS-Zone Project</h1>
<p>Currently, the flow is not complete. Please use one of the pre-built <a class="el" href="zTExamples.html">Examples</a> instead:</p>
<ul>
<li>The <a class="el" href="zTExamples.html#zTEMusca">Arm Musca-A1</a> example shows the configuration of a multi-processor system with two Arm Cortex-M33 cores. Both cores offer TrustZone for Armv8-M and thus two zonoes (secure/non-secure) are created for each processor.</li>
<li>the <a class="el" href="zTExamples.html#zTELPC55">NXP LPC55S69</a> example is based on a multi-processor system with two Cortex-M33 processors, where only core 0 is eanbled with TrustZone for Armv8-M. Thus, the second core is not further divided into sub-zones.</li>
</ul>
<h1><a class="anchor" id="zTUIMemPerRes"></a>
Memory and Peripheral Resources</h1>
<p>Memory and peripherals can be assigned certain permission and privilege levels, as well as a security attribute. Memories can be further divided into smaller parts.</p>
<h2><a class="anchor" id="zTUIMemAdd"></a>
Create/add New Memory Block</h2>
<p>To create a new memory block, right-click on the memory that you want to divide and select <b>Add memory block</b>:</p>
<div class="image">
<img src="AddMemoryBlock.png" alt="AddMemoryBlock.png"/>
</div>
<p>A new window opens. A name derived from the parent memory is already entered. Change it at your convenience. Specify the size of the new block. In this dialog, you can set permissions, privilege, as well as security levels for the memory block. When done, click <b>Finish:</b> </p>
<div class="image">
<img src="NewMemoryBlockWiz.png" alt="NewMemoryBlockWiz.png"/>
</div>
<p>The new memory block is immediately shown in the zone map. Depending on the security level, you may be able to assign this new block only to certain zones. For example, secure memory blocks cannot be assigned to non-secure zones. In this case, the checkbox for the assignment is missing:</p>
<div class="image">
<img src="IRAM1_1Display.png" alt="IRAM1_1Display.png"/>
</div>
<p>Use this flow to partition the project as required by the system design. When done, <a class="el" href="zTInteractiveMode.html#zTUIGenerate">generate</a> the output files and continue in your toolchain of choice.</p>
<h2><a class="anchor" id="zTUIPerProp"></a>
Resource Properties</h2>
<p>To change the properties of a resource, such as a peripheral for example, right-click the resource and select <b>Properties</b>. Then, you can set permissions (<code>peripheral</code>, <code>read</code>, <code>write</code>, and <code>execute</code>) and select if only <code>privileged</code> or <code>unprivileged</code> access is possible (or if it is not specified). You can also set a security level for the peripheral (<code>not</code> specified, <code>non-secure</code>, <code>non-secure</code> callable, <code>secure</code>).</p>
<h1><a class="anchor" id="zTUIZonePart"></a>
Zone Partitioning</h1>
<p>Every CMSIS-Zone project consists of one or more zones. The basic flow to create zones is as follows:</p>
<ul>
<li>In case of multi-core devices, create a zone for each processor.</li>
<li>Then create at least one zone for each processor to be able to assign memories and peripherals. If your device contains Arm Cortex-M cores supporting TrustZone for Armv8-M, create a secure and a non-secure partition for each of these cores.</li>
</ul>
<h2><a class="anchor" id="zTUICreate"></a>
Create Zones</h2>
<p>To split a multi-processor system into single-processor sub-systems, you need to create new zones. Switch to the <b>Zones</b> tab and click the <b>Add new zone</b> button:</p>
<div class="image">
<img src="AddNewZoneButton.png" alt="AddNewZoneButton.png"/>
</div>
<p>In the new window, you need to specify a name for the zone, select the applicable core, and choose the security level (secure/non-secure).</p>
<p>In the <a class="el" href="zTExamples.html#zTEMusca">Musca</a> example, a new zone called "CM33_0" was created and attached to processor core 0 without any security attribute (not specified):</p>
<div class="image">
<img src="NewZoneCM33_0.png" alt="NewZoneCM33_0.png"/>
</div>
<p>Similarly, an additional zone called "CM33_1" was created and attached to processor core 1, without security attribute.</p>
<p><b>Save</b> your settings:</p>
<div class="image">
<img src="SaveButton.png" alt="SaveButton.png"/>
</div>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<p>Adding zones only works for the currently opened <a class="el" href="zoneFormat.html#azone">.azone</a> file.</p>
<h1><a class="anchor" id="zTUIGenerate"></a>
Generate output</h1>
<p>The main purpose of the CMSIS-Zone utility is to generate files that represent the configured system and that can be used in other toolchains for further development. The generator process creates:</p>
<ol type="1">
<li>required files for zones (<a class="el" href="zoneFormat.html#rzone">.rzone</a> and <a class="el" href="zoneFormat.html#azone">.azone</a> files, once you have <a class="el" href="zTInteractiveMode.html#zTUICreate">created</a> new zones.</li>
<li>output files, such as header and scatter files, once you have placed <a class="el" href="GenDataModel.html">ftl files</a> in the project's <code>ftl</code> directory.</li>
</ol>
<p>To start the generation, press the <b>Generate</b> button or use the menu item <b>CMSIS Zone - Generate</b>:</p>
<div class="image">
<img src="GenCodeButton.png" alt="GenCodeButton.png"/>
</div>
<p>Check <a class="el" href="zTUI.html#zTProjEx">Project Explorer</a> to observe the changes. In the current project, newly generated <code>azone</code> and <code>rzone</code> files appear, as well as <code>ftl</code> and <code>ftl_gen</code> folders. To generate output in the <code>ftl_gen</code> folder, copy the relevant <code>ftl</code> files into the <code>ftl</code> directory and rerun the generation. Observe the output:</p>
<div class="image">
<img src="gen_output.png" alt="gen_output.png"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="zoneToolUsage.html">CMSIS-Zone Utility</a></li>
    <li class="footer">Generated on Wed May 15 2019 09:52:55 for CMSIS-Zone (Preview) Version 0.11.0 by Arm Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
